<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jinhe.modules.demo.dao.DStudentMapper">

    <select id="getListbyName" resultType="com.jinhe.modules.demo.entity.DStudent">
        SELECT * from d_student where name=#{name}
    </select>
    <select id="ListDly" resultType="com.jinhe.modules.demo.dto.DStudentDto">
        SELECT NAME ,
            group_concat(
            DISTINCT
            CASE

                    WHEN d_student.id IS NOT NULL THEN
                    ( concat( d_student.id, '_', d_student.`subject`, '_', d_student.score ) ) ELSE ''
                END
                ) AS item
            FROM
                d_student
            WHERE
                NAME = #{name}
        GROUP BY
            d_student.`name`
    </select>
</mapper>
